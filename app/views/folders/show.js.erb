<% if @folder.partial_name == "window" %>
  $('.folderContainer').html('<%= j render partial: "#{ @folder.partial_name }" %>');
<% else %>
  $('body').append('<%= j render partial: "#{ @folder.partial_name }" %>');
<% end %>

<% if @folder.partial_name == "matrix" %>
  $('body').append('<%= j render partial: "spams/spam" %>');
<% end %>

$('.closebtn').on('click', function() {
  console.log('Click');
  $(this).parents('#computer').remove();
  $('taskbarItems').remove();
})


<% if @folder.icon == 'folder.svg' %>
  $('#computer .menu_top').append('<%= j render "back" %>');
<% end %>

$(".draggable").draggable()

$('.taskbar_elements').append('<%= j render "task_bar_folder" %>');

//spam

var spamLinks = document.querySelectorAll('[href="#spam"]'),
  spamWindows = document.querySelectorAll('.spam-window'),
  spamContainer = document.querySelector('.spam');

var i;

var delay = 300,
  called = false;

  $('.searchbutton').on('click', function() {
    for (i = 1; i < spamWindows.length; i++) {
      var time = delay * i;
      delayWindowOpen(spamWindows[i], time);
    }
    $('.spam').removeClass('hidden');
  })

function delayWindowOpen(el, time) {
  setTimeout(function() {
    el.classList.remove('hidden');
  }, time)
}

for (i = 0; i < spamLinks.length; i++) {
  spamLinks[i].addEventListener('click', function() {
    setTimeout(function() {
      if (called == false) {
        document.querySelector('#alert1').classList.remove('hidden');
        called = true;
        animatespamWindows();
      }
    }, 2000);
  });
}

spamContainer.addEventListener('click', function() {
  if (spamContainer.querySelector('.hidden')) {
    called = false;
    for (i = 1; i < spamWindows.length; i++) {
      spamWindows[i].classList.remove('.hidden');
    }
  }
});
