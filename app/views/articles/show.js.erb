var articleId = "#article_" + "<%= @article.id %>"
var layer = parseInt(document.getElementsByTagName('body')[0].dataset.layer)
console.log(document.getElementsByTagName('body')[0].dataset.layer)
console.log(layer)


$('body').append('<%= j render partial: "articles/#{ @article.partial_name }" %>')
$('.taskbar_elements').append('<%= j render "folders/task_bar_article" %>')
$('.taskbarItems' + articleId).append('<%= @article.title %>')
$('.articleContainer' + articleId).css("z-index", layer)
document.getElementsByTagName('body')[0].dataset.layer = layer + 1

$('.articleContainer' + articleId).on("click", function() {
  console.log('.articleContainer' + articleId)
  $(this).css("z-index", layer)
  document.getElementsByTagName('body')[0].dataset.layer = layer + 1
})

$('.closeBtn').on('click', function() {
  console.log('Click')
  $(this).parents('.articleContainer').remove()
})

 $(".articleContainer").draggable()

$('.closeBtn').on('click', function() {
  var id = $(this).parents('.articleContainer').attr("id")
  $('.articleContainer#' + id).remove()
  $('.taskbarItems#' + id).remove()
})


$(".draggable").draggable({
  zIndex: layer,
  stop: function() {
    document.getElementsByTagName('body')[0].dataset.layer = layer + 1
    $('.articleContainer' + articleId).css("z-index", document.getElementsByTagName('body')[0].dataset.layer)
  }
})

//articles
$('#popup-close').on('click', function() {
  console.log('close')
  $(this).parents('.popup').remove()
})

$(".next").click(function() {
  if ('.firstpage') {
    $('.firstpage').css('display', 'none');
    $('.secondpage').css('display', 'block');
  } else if ('.secondpage') {
    $('.secondpage').css('display', 'none');
    $('.thirdpage').css('display', 'block');
  } else {
    $('.secondpage').css('display', 'none');
    $('.firstpage').css('display', 'none');
  }
});

$(".prev").click(function() {
  if ('.secondpage') {
    $('.secondpage').css('display', 'none');
    $('.firstpage').css('display', 'block');
  } else if ('.firstpage') {
    $('.firstpage').css('display', 'none');
    $('.secondpage').css('display', 'block');
  } else {
    $('.firstpage').css('display', 'none');
    $('.secondpage').css('display', 'none');
  }
});
