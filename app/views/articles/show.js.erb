var articleId = "#article_" + "<%= @article.id %>"
var layer = parseInt(document.getElementsByTagName('body')[0].dataset.layer)


$('body').append('<%= j render partial: "articles/#{ @article.partial_name }" %>')

$('.closebtn').on('click', function() {
  console.log('Click')
  $(this).parents('.articleContainer').remove()
})

$(".articleContainer").draggable()
$(".content_inside .draggable").draggable()

$('.taskbar_elements').append('<%= j render "folders/task_bar_article" %>')

$('.closebtn').on('click', function() {
  var id = $(this).parents('.articleContainer').attr("id")
  $('.articleContainer#' + id).remove()
  $('.taskbarItems#' + id).remove()
})


$(".draggable").draggable({
  zIndex: layer,
  stop: function() {
    document.getElementsByTagName('body')[0].dataset.layer = layer + 1
    $('.articleContainer' + articleId).css("z-index", document.getElementsByTagName('body')[0].dataset.layer)
  }
})

$('.articleContainer' + articleId).on("click", function() {
  console.log('.articleContainer' + articleId)
  $(this).css("z-index", layer)
  document.getElementsByTagName('body')[0].dataset.layer = layer + 1
})

//articles
$('#popup-close').on('click', function() {
  console.log('close')
  $(this).parents('.popup').remove()
})

$(".next").click(function() {
  if ('.firstpage') {
    $('.firstpage').css('display', 'none')
    $('.secondpage').css('display', 'block')
  } else if ('.secondpage') {
    $('.secondpage').css('display', 'none')
    $('.thirdpage').css('display', 'block')
  }
})

$(".prev").click(function() {
  if ('.secondpage') {
    $('.secondpage').css('display', 'none')
    $('.firstpage').css('display', 'block')
  } else if ('.thirdpage') {
    $('.thirdpage').css('display', 'none')
    $('.secondpage').css('display', 'block')
  }
})

$('#fastlink_erwise').on('click', function() {
  console.log(hi);
})
